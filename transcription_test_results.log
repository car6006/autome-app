ğŸš€ Starting Large-File Transcription Pipeline Test
============================================================

ğŸ” Checking test file: /tmp/test_pipeline_30s.wav
âœ… Test file found: 2,646,078 bytes (2.5 MB)
âœ… Registered test user: test_transcription_1756378651@example.com

ğŸ“¤ Creating upload session...
âœ… Upload session created: bb927c09-7aa1-459a-80f0-8f1498fd2219
   Chunk size: 5,242,880 bytes

ğŸ“ Uploading file chunks...
   Total chunks: 1
   Chunk size: 2,646,078 bytes
   âœ… Uploaded chunk 1/1
âœ… All chunks uploaded successfully

ğŸ¯ Finalizing upload...
âœ… Upload finalized successfully
   Job ID: 9c15b057-f3fa-4110-b6cc-d1e9c96210f7

ğŸ‘€ Monitoring transcription job: 9c15b057-f3fa-4110-b6cc-d1e9c96210f7
ğŸ” Looking for debugging logs:
   - ğŸ’¾ Job {job_id}: Saving checkpoint with X transcripts...
   - âœ… Job {job_id}: Checkpoint verified - X transcripts saved
   - ğŸ” Job {job_id}: Looking for transcription checkpoint...
   - âœ… Job {job_id}: Found checkpoint with keys: ...
   - Any error messages about checkpoint verification or retrieval
   [10:57:31] Stage: created, Progress: 0.0%, Status: created
   [10:57:37] Stage: transcoding, Progress: 0.0%, Status: processing
   [10:57:42] Stage: failed, Progress: 10.0%, Status: failed
âŒ Transcription failed!
   Error code: STAGE_ERROR
   Error message: PENDING

ğŸ” DEBUGGING INFO - Job failed in stage: failed

ğŸ“‹ Checking backend logs for debugging information...
â„¹ï¸  Job logs require admin access (403)

ğŸ¥ System Health:
   Overall status: healthy
   Pipeline status: {'worker': {'running': True, 'worker_active': True, 'task_running': True}, 'queue': {'created_jobs': 0, 'processing_jobs': 0, 'failed_jobs_ready_for_retry': 0, 'total_queued': 0}}

ğŸ§¹ Cleaning up test resources...
âœ… Upload session cleaned up
âœ… Transcription job cleaned up

============================================================
âŒ TRANSCRIPTION PIPELINE TEST FAILED
ğŸ” This provides valuable debugging information about:
   - Where the pipeline breaks down
   - Checkpoint save/retrieve process issues
   - Merge stage success/failure
   - Error messages for troubleshooting
